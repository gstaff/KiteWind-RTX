<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>

</head>
<body>
<h1>TEST</h1>
<div id="KiteWindApp">
    <!-- This app was created with KiteWind Chat-assisted Web App Creator (https://huggingface.co/spaces/gstaff/KiteWind) -->
    <iframe id="demo-iframe" width="100%" height="512px" src="about:blank" frameborder="0"></iframe>
    <script>
        const template = `<div id="root"></div>
            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.39.0/build/stlite.css"/>
            <script src="https://cdn.jsdelivr.net/npm/@stlite/mountable@0.42.3/build/stlite.js"><\/script>
            <script>
                  const streamlitConfig = "[server]\\nrunOnSave = true";
                  const code = \`import streamlit as st
from transformers_js_py import import_transformers_js

transformers = await import_transformers_js()
pipeline = transformers.pipeline
pipe = await pipeline('sentiment-analysis')

out = await pipe('I love transformers!')


def greet(name):
    return "Hello " + name + "!"

name_input = st.text_input('Your name')
greet_button = st.button('Greet??')
if greet_button:
    st.write(greet(name_input))
elif name_input:
    st.write(greet(name_input))
else:
    st.write(greet('World'))\`;
                  const appController = stlite.mount({
                      requirements: ["transformers-js-py"], // Packages to install
                      entrypoint: "streamlit_app.py", // The target file of the streamlit run command
                      files: {
                        ".streamlit/config.toml": streamlitConfig,
                        "streamlit_app.py": code,
                      },
                    }, document.getElementById("root"));
                  // Returned controller functions defined here:
                  window.appController = appController;
            <\/script>`
        const frame = document.getElementById('demo-iframe');
        frame.contentWindow.document.open();
        frame.contentWindow.document.write(template);
        frame.contentWindow.document.close();
    </script>
</div>


</body>
</html>